<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: "ca-pub-1919957041991194",
  enable_page_level_ads: true
});</script><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta content="author" name="ChanghuiN"><meta name="keywords" content="代码星冰乐,码小猪,I-team,Kotlin：Android开发技巧,Kotlin,Kotlin开发技巧,Android kotlin"><meta name="description" content="&lt;p&gt;Kotlin作为Android开发第一语言，然而身边做Android的大多还是使用java。Android转到Kotlin的趋势是必然的，公司隔壁部门已经全部使用Kotlin开发，我们在以后新的项目里，也会以Kotlin为主。关于Kotlin的知识，博主只是在去年下半年的时候看过官网的教程，也读了《Kotlin for Android Developers》，并写了一个练手项目，不过大半年过去了，要把以前学过的知识重新拿起来有点儿不易，于是总结了一些Kotlin在Android开发中的常用技巧。&lt;br&gt;"><title>Kotlin：Android开发技巧 - 代码星冰乐</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script type="text/javascript" src="https://dup.baidustatic.com/js/ds.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-125332711-1" async></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-125332711-1');</script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Kotlin：Android开发技巧</h1><a id="logo" href="/.">代码星冰乐<img src="/favicon.ico" alt style="width: 34px; margin-left: 5px; vertical-align: bottom;"></a><p class="description">专注成就未来</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Kotlin：Android开发技巧</h1><div class="post-meta">May 12, 2018<span> | </span><span class="author">ChanghuiN</span><span> | </span><span class="category"><a href="/categories/Kotlin/">Kotlin</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="blog_value_page_pv"></span><span> 阅读</span></span><script type="text/javascript">$(function() {
  var blog_url = window.location.href.split("?")[0];
  var fet_url = "/base-service/blog_read_count_incr?blogId=" + blog_url;
  fetch(fet_url).then(function(response){
    return response.json();
  }).then(function(data) {
    $("#blog_value_page_pv").text(data.data)
  }).catch(function (e) {
    console.log(e);
  })
});</script></div><div class="clear" style="margin-top: 12em;"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Kotlin-基础技巧"><span class="toc-number">1.</span> <span class="toc-text">Kotlin 基础技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#单例"><span class="toc-number">1.1.</span> <span class="toc-text">单例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Kotlin-委托"><span class="toc-number">1.2.</span> <span class="toc-text">Kotlin 委托</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#run、with、apply、alse、let、takeIf、repeat"><span class="toc-number">1.3.</span> <span class="toc-text">run、with、apply、alse、let、takeIf、repeat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#拓展函数"><span class="toc-number">1.4.</span> <span class="toc-text">拓展函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Anko-框架"><span class="toc-number">2.</span> <span class="toc-text">Anko 框架</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Anko-Commons"><span class="toc-number">2.1.</span> <span class="toc-text">Anko Commons</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Anko-Layouts"><span class="toc-number">2.2.</span> <span class="toc-text">Anko Layouts</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Anko-SQLite"><span class="toc-number">2.3.</span> <span class="toc-text">Anko SQLite</span></a></li></ol></li></ol></div></div><div class="post-content" style="margin-top: -12em; display: none;"><blockquote style="margin: 10px 0;"><p style="margin: 1em 0"><span>作 者：</span><span class="author">ChanghuiN</span><br><span>原文链接：</span><a href="https://www.hchstudio.cn/article/2018/d4ae/">https://www.hchstudio.cn/article/2018/d4ae/</a><br><span>版权声明：非特殊声明均为本站原创作品，转载时请注明作者和原文链接。</span></p></blockquote><br><p><span> 由于版权原因，请阅读原文 --&gt; </span><a href="https://www.hchstudio.cn/article/2018/d4ae/">Kotlin：Android开发技巧</a></p><p> <img alt="关注我们" style="width: 66%" src="https://img.hchstudio.cn/dmxbl.jpg"></p><p style="margin-top: 40px; margin-bottom: 40px;"><span style="color: red;">作 者：</span><span class="author">ChanghuiN</span><br><span style="color: red;">原文链接：</span><a href="https://www.hchstudio.cn/article/2018/d4ae/">https://www.hchstudio.cn/article/2018/d4ae/</a><br><span style="color: red;">版权声明：非特殊声明均为本站原创作品，转载时请注明作者和原文链接。</span></p></div><div class="post-content_private" style="margin-top: -12em;"><blockquote style="margin: 10px 0;"><p style="margin: 1em 0"><span>作 者：</span><span class="author">ChanghuiN</span><br><span>原文链接：</span><a href="https://www.hchstudio.cn/article/2018/d4ae/">https://www.hchstudio.cn/article/2018/d4ae/</a><br><span>版权声明：非特殊声明均为本站原创作品，转载时请注明作者和原文链接。</span></p></blockquote><p>Kotlin作为Android开发第一语言，然而身边做Android的大多还是使用java。Android转到Kotlin的趋势是必然的，公司隔壁部门已经全部使用Kotlin开发，我们在以后新的项目里，也会以Kotlin为主。关于Kotlin的知识，博主只是在去年下半年的时候看过官网的教程，也读了《Kotlin for Android Developers》，并写了一个练手项目，不过大半年过去了，要把以前学过的知识重新拿起来有点儿不易，于是总结了一些Kotlin在Android开发中的常用技巧。<br><a id="more"></a></p>
<h2 id="Kotlin-基础技巧"><a href="#Kotlin-基础技巧" class="headerlink" title="Kotlin 基础技巧"></a>Kotlin 基础技巧</h2><h3 id="单例"><a href="#单例" class="headerlink" title="单例"></a>单例</h3><p>Kotlin是一种非常简单的语言，单例也是如此，这里列出两种常用的单例格式：<br>第一种：通过伴生对象+委托实现单例<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> : <span class="type">MultiDexApplication</span></span>() &#123;</span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> INSTANCE: APP <span class="keyword">by</span> Delegates.notNull()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">()</span></span> &#123;</span><br><span class="line">        INSTANCE = <span class="keyword">this</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>如上代码，在伴生对象中声名变量，并使用netNull委托避免Kotlin中的空异常检查，然后在onCreate中赋值  </p>
<p>第二种：Kotlin关键字object<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">object</span> CommonParam &#123;</span><br><span class="line">    <span class="keyword">var</span> TAG = <span class="string">""</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Kotlin的写法是不是很简单粗暴。  </p>
<h3 id="Kotlin-委托"><a href="#Kotlin-委托" class="headerlink" title="Kotlin 委托"></a>Kotlin 委托</h3><p>Kotlin中支持委托，有类委托、标准委托、也可以自定义委托。同学们可以看我之前的一篇博客：<a href="https://www.hchstudio.cn/article/2017/9855/">Kotlin委托</a>  </p>
<h3 id="run、with、apply、alse、let、takeIf、repeat"><a href="#run、with、apply、alse、let、takeIf、repeat" class="headerlink" title="run、with、apply、alse、let、takeIf、repeat"></a>run、with、apply、alse、let、takeIf、repeat</h3><table>
<thead>
<tr>
<th style="text-align:center">字段</th>
<th style="text-align:center">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">T.run(block: () -&gt; R)</td>
<td style="text-align:center">运行函数并返回函数运行结果</td>
</tr>
<tr>
<td style="text-align:center">T.with(receiver: T, block: T.() -&gt; R)</td>
<td style="text-align:center">receiver作为block函数的this，返回函数运行结果</td>
</tr>
<tr>
<td style="text-align:center">T.apply(block: T.() -&gt; Unit)</td>
<td style="text-align:center">运行函数，返回调用者自身</td>
</tr>
<tr>
<td style="text-align:center">T.also(block: (T) -&gt; Unit)</td>
<td style="text-align:center">调用者作为函数it，执行函数并返回调用者自身</td>
</tr>
<tr>
<td style="text-align:center">T.let(block: (T) -&gt; R)</td>
<td style="text-align:center">调用者作为block函数的this，返回函数运行结果</td>
</tr>
<tr>
<td style="text-align:center">T.tabkeIf(predicate: (T) -&gt; Boolean)</td>
<td style="text-align:center">调用者满足函数的条件则返回自身，否则返回null</td>
</tr>
<tr>
<td style="text-align:center">T.takeUnless(predicate: (T) -&gt; Boolean)</td>
<td style="text-align:center">与tabkeIf相反</td>
</tr>
<tr>
<td style="text-align:center">repeat(times: Int, action: (Int) -&gt; Unit)</td>
<td style="text-align:center">从0遍历times，并运行action</td>
</tr>
</tbody>
</table>
<h3 id="拓展函数"><a href="#拓展函数" class="headerlink" title="拓展函数"></a>拓展函数</h3><p>Kotlin 可以对一个类的属性和方法进行扩展，且不需要继承或使用 Decorator 模式。<br>扩展是一种静态行为，对被扩展的类代码本身不会造成任何影响。<br>这里列出几个常用的拓展函数：<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Map&lt;K, V?&gt;类型转换为Array&lt;out Pair&lt;K, V&gt;&gt;类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;K, V : Any&gt;</span> Map<span class="type">&lt;K, V?&gt;</span>.<span class="title">toVarargArray</span><span class="params">()</span></span>: Array&lt;<span class="keyword">out</span> Pair&lt;K, V&gt;&gt; =</span><br><span class="line">        map(&#123; Pair(it.key, it.value!!) &#125;).toTypedArray()</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ImageView加载网络图片</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> ImageView.<span class="title">loadImage</span><span class="params">(url: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">    CommonModule.picasso.load(url).into(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * anko.db框架中，数据库查询解析</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T : Any&gt;</span> SelectQueryBuilder.<span class="title">parseList</span><span class="params">(parser: (<span class="type">Map</span>&lt;<span class="type">String</span>, <span class="type">Any</span>?&gt;) -&gt; <span class="type">T</span>)</span></span>: List&lt;T&gt; =</span><br><span class="line">        parseList(<span class="keyword">object</span> : MapRowParser&lt;T&gt; &#123;</span><br><span class="line">            <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">parseRow</span><span class="params">(columns: <span class="type">Map</span>&lt;<span class="type">String</span>, Any?&gt;)</span></span>: T = parser(columns)</span><br><span class="line">        &#125;)</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T : Any&gt;</span> SelectQueryBuilder.<span class="title">parseOpt</span><span class="params">(parser: (<span class="type">Map</span>&lt;<span class="type">String</span>, <span class="type">Any</span>?&gt;) -&gt; <span class="type">T</span>)</span></span>: T? =</span><br><span class="line">        parseOpt(<span class="keyword">object</span> : MapRowParser&lt;T&gt; &#123;</span><br><span class="line">            <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">parseRow</span><span class="params">(columns: <span class="type">Map</span>&lt;<span class="type">String</span>, Any?&gt;)</span></span>: T = parser(columns)</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure></p>
<h2 id="Anko-框架"><a href="#Anko-框架" class="headerlink" title="Anko 框架"></a>Anko 框架</h2><h3 id="Anko-Commons"><a href="#Anko-Commons" class="headerlink" title="Anko Commons"></a>Anko Commons</h3><p>Anko Intent helpers：<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">startActivity(intentFor&lt;SomeOtherActivity&gt;(<span class="string">"id"</span> to <span class="number">5</span>).singleTop())</span><br></pre></td></tr></table></figure></p>
<p>Anko Dialogs<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">toast(<span class="string">"Hi there!"</span>)  <span class="comment">// Toast</span></span><br><span class="line">snackbar(view, <span class="string">"Hi there!"</span>)     <span class="comment">// snacbar</span></span><br><span class="line">alert(<span class="string">"Hi, I'm Roy"</span>, <span class="string">"Have you tried turning it off and on again?"</span>) &#123;       <span class="comment">// alert</span></span><br><span class="line">    yesButton &#123; toast(<span class="string">"Oh…"</span>) &#125;</span><br><span class="line">    noButton &#123;&#125;</span><br><span class="line">&#125;.show()</span><br><span class="line">selector(<span class="string">"Where are you from?"</span>, countries, &#123; dialogInterface, i -&gt;          <span class="comment">// selector</span></span><br><span class="line">    toast(<span class="string">"So you're living in <span class="subst">$&#123;countries[i]&#125;</span>, right?"</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>AnkoLogger<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeActivity</span> : <span class="type">Activity</span></span>(), AnkoLogger &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">someMethod</span><span class="params">()</span></span> &#123;</span><br><span class="line">        info(<span class="string">"London is the capital of Great Britain"</span>)</span><br><span class="line">        debug(<span class="number">5</span>) <span class="comment">// .toString() method will be executed</span></span><br><span class="line">        warn(<span class="literal">null</span>) <span class="comment">// "null" will be printed</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Colors<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0xff0000</span>.opaque     <span class="comment">// 转变为不透明的颜色</span></span><br><span class="line"><span class="number">0x99</span>.gray.opaque    <span class="comment">// 转变为不透明的灰色</span></span><br><span class="line"><span class="number">0xabcdef</span>.withAlpha(<span class="number">0xCF</span>) == <span class="number">0xCFabcdef</span>      <span class="comment">// 设置透明度</span></span><br></pre></td></tr></table></figure></p>
<p>Dimensions<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dip(dipValue)       <span class="comment">// dip转换为px</span></span><br><span class="line">sp(spValue)         <span class="comment">// sp转换为px</span></span><br><span class="line">px2dip/px2sp        <span class="comment">// px转换为dip或者sp</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Anko-Layouts"><a href="#Anko-Layouts" class="headerlink" title="Anko Layouts"></a>Anko Layouts</h3><p>对于Anko Layouts的话，就相当于把xml的形式以DSL写在代码里，看起来很方便，不过楼主还是习惯了xml的方式，AnkoLayouts使用的比较少，想用的小伙伴们可以自行百度学习吧。</p>
<h3 id="Anko-SQLite"><a href="#Anko-SQLite" class="headerlink" title="Anko SQLite"></a>Anko SQLite</h3><p>Anko提供了很方便的sql接口<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDatabaseOpenHelper</span></span>(ctx: Context) : ManagedSQLiteOpenHelper(ctx, <span class="string">"MyDatabase"</span>, <span class="literal">null</span>, <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">var</span> instance: MyDatabaseOpenHelper? = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">        <span class="meta">@Synchronized</span></span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">getInstance</span><span class="params">(ctx: <span class="type">Context</span>)</span></span>: MyDatabaseOpenHelper &#123;</span><br><span class="line">            <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">                instance = MyDatabaseOpenHelper(ctx.getApplicationContext())</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> instance!!</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(db: <span class="type">SQLiteDatabase</span>)</span></span> &#123;</span><br><span class="line">        <span class="comment">// Here you create tables</span></span><br><span class="line">        db.createTable(<span class="string">"Customer"</span>, <span class="literal">true</span>, </span><br><span class="line">                    <span class="string">"id"</span> to INTEGER + PRIMARY_KEY + UNIQUE,</span><br><span class="line">                    <span class="string">"name"</span> to TEXT,</span><br><span class="line">                    <span class="string">"photo"</span> to BLOB)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onUpgrade</span><span class="params">(db: <span class="type">SQLiteDatabase</span>, oldVersion: <span class="type">Int</span>, newVersion: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">        <span class="comment">// Here you can upgrade tables, as usual</span></span><br><span class="line">        db.dropTable(<span class="string">"User"</span>, <span class="literal">true</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Access property for Context</span></span><br><span class="line"><span class="keyword">val</span> Context.database: MyDatabaseOpenHelper</span><br><span class="line">    <span class="keyword">get</span>() = MyDatabaseOpenHelper.getInstance(getApplicationContext())</span><br></pre></td></tr></table></figure></p>
<p>然后在需要用数据的地方，执行增删改查就好<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">database.use &#123;</span><br><span class="line">    <span class="comment">// `this` is a SQLiteDatabase instance</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p> <img alt="关注我们" style="width: 66%" src="https://img.hchstudio.cn/dmxbl.jpg"></p><p style="margin-top: 40px; margin-bottom: 40px;"><span style="color: red;">作 者：</span><span class="author">ChanghuiN</span><br><span style="color: red;">原文链接：</span><a href="https://www.hchstudio.cn/article/2018/d4ae/">https://www.hchstudio.cn/article/2018/d4ae/</a><br><span style="color: red;">版权声明：非特殊声明均为本站原创作品，转载时请注明作者和原文链接。</span></p></div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="https://www.hchstudio.cn/article/2018/d4ae/" data-id="ckrdhz4r8000ysmpvhcaezi5m" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACLUlEQVR42u3aQY7jMAwEwPn/pz3XBYI43WJ2AEulU5A4lsoHmiL18xOP65/x+v3rNa/f3//rfpavDQwMjMcyrtuRMN79637R7+58/2jeUjEwMA5gvItga5/vQ/DaXB/WjIGBgVEudx6CMTAwMCaMSUht74OBgYHRbmLzENluTfO7fWEvjoGB8UBGXnX/+8//pb+BgYHxKMZVjrwlsLasa2lgYGDszcinmbQ220MV7XowMDBOY8zL9Pkms30oi9krBgbGwxn3t0jCaPuA1tqiH+6GgYGxNeM+qOWwPDjmx2QXGwAYGBjbMfJi1mTKtTD9tWMWGBgYWzDy4tp8U9oenohWgoGBsTWjDYvtAbI2Ac2PiEXvEAwMjK0ZeZibh9e1tsSHchsGBsYxjLZU1yZ5bWiOXgwYGBjbMSZl+rwoVvco4oQSAwPjTEb+58m28/5h1bNjYGAcyWgTuHkDYC09xcDAOIeR73fbhK8NuPkmFgMD4xxGXuifpHR5izRpc0YPEQMDYztGHv7aclvSgMxbm1HRDQMD4xjG2kY0P0KxFo7rdwUGBsYBjDxlbKesM9YEjIGBsSnjKsfkeER+TZ4sYmBgnMBol5WX7ydBNl96jcHAwHgsoy1+taFzUr0v2gwYGBgHMNYCX5JEzje90ZUYGBgYgzZn29psr8TAwMBoC/3zY2F5ijlKDTEwMB7ImBxXbX/NrymCPgYGxtaMeUsyaRtMSnhfa2RiYGA8j/ELH3nk83qSOaQAAAAASUVORK5CYII=">分享</a><div class="tags"><a href="/tags/Android/" target="_blank">Android</a><a href="/tags/Kotlin/" target="_blank">Kotlin</a></div><div class="post-nav"><a class="pre" href="/article/2018/ccf6/">classpath* 和 classpath使用遇到的问题</a><a class="next" href="/article/2018/1766/">死磕Java之聊聊ThreadLocal源码(基于JDK1.8)</a></div><div id="gitalk-container"></div><link rel="stylesheet" type="text/css" href="/css/gitalk.css"><script type="text/javascript" src="/js/gitalk.min.js"></script><script>var gitalk = new Gitalk({
  clientID: '66106b18af72ad1fe98a',
  clientSecret: '5602bdf32cf5f90c31001be000afd88a48d6f563',
  repo: 'ChanghuiN.github.io',
  owner: 'ChanghuiN',
  admin: ['ChanghuiN'],
  id: location.pathname.split('/').slice(-2,-1)[0],
  distractionFreeMode: false
})
gitalk.render('gitalk-container')
</script><script>var cpro_id = "u3438285";</script><script src="https://cpro.baidustatic.com/cpro/ui/cm.js"></script></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget" style="margin-bottom: 20px"><img style="width: 100%" src="https://img.hchstudio.cn/qrcode_for_gh_e1d420c73d96_430.jpg"><sapn style="display: block; text-align: center">微信关注我们</sapn></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Go/">Go</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">59</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kafka-Java/">Kafka,Java</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kotlin/">Kotlin</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MapReduce/">MapReduce</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Raft/">Raft</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ThreadPoolExecutor/">ThreadPoolExecutor</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/go/">go</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/总结/">总结</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/旅游日记/">旅游日记</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Nginx/" style="font-size: 15px;">Nginx</a> <a href="/tags/ChanghuiN/" style="font-size: 15px;">ChanghuiN</a> <a href="/tags/haifeiWu/" style="font-size: 15px;">haifeiWu</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/Kotlin/" style="font-size: 15px;">Kotlin</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/MySQL/" style="font-size: 15px;">MySQL</a> <a href="/tags/源码解析/" style="font-size: 15px;">源码解析</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/Redis/" style="font-size: 15px;">Redis</a> <a href="/tags/golang/" style="font-size: 15px;">golang</a> <a href="/tags/web/" style="font-size: 15px;">web</a> <a href="/tags/Kafka/" style="font-size: 15px;">Kafka</a> <a href="/tags/配置中心/" style="font-size: 15px;">配置中心</a> <a href="/tags/总结/" style="font-size: 15px;">总结</a> <a href="/tags/性能优化/" style="font-size: 15px;">性能优化</a> <a href="/tags/旅游日记/" style="font-size: 15px;">旅游日记</a> <a href="/tags/Shell/" style="font-size: 15px;">Shell</a> <a href="/tags/Go/" style="font-size: 15px;">Go</a> <a href="/tags/问题排查/" style="font-size: 15px;">问题排查</a> <a href="/tags/译文/" style="font-size: 15px;">译文</a> <a href="/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/tags/Spring-Boot/" style="font-size: 15px;">Spring Boot</a> <a href="/tags/工具/" style="font-size: 15px;">工具</a> <a href="/tags/学习笔记/" style="font-size: 15px;">学习笔记</a> <a href="/tags/WebFlux/" style="font-size: 15px;">WebFlux</a> <a href="/tags/性能测试/" style="font-size: 15px;">性能测试</a> <a href="/tags/go/" style="font-size: 15px;">go</a> <a href="/tags/散列表/" style="font-size: 15px;">散列表</a> <a href="/tags/源码/" style="font-size: 15px;">源码</a> <a href="/tags/netty/" style="font-size: 15px;">netty</a> <a href="/tags/Raft/" style="font-size: 15px;">Raft</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/article/2021/7cba/">Kafka的日志复制机制</a></li><li class="post-list-item"><a class="post-list-link" href="/article/2021/8e2f/">从20到21</a></li><li class="post-list-item"><a class="post-list-link" href="/article/2020/e8fc/">go 并发编程</a></li><li class="post-list-item"><a class="post-list-link" href="/article/2020/ce5a/">【译】了解Linux CPU负载-您何时应该担心？</a></li><li class="post-list-item"><a class="post-list-link" href="/article/2020/4d59/">Zookeeper 与分布式锁</a></li><li class="post-list-item"><a class="post-list-link" href="/article/2020/7bc5/">基于Redis的分布式锁到底安全吗？</a></li><li class="post-list-item"><a class="post-list-link" href="/article/2020/62e/">【译】Raft 学生指南</a></li><li class="post-list-item"><a class="post-list-link" href="/article/2020/c5a/">ThreadPoolExecutor 的简单梳理</a></li><li class="post-list-item"><a class="post-list-link" href="/article/2020/1ed5/">MapReduce 的简单实现</a></li><li class="post-list-item"><a class="post-list-link" href="/article/2020/4a72/">使用 Map 实现策略模式</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 福利专区</i></div><ul></ul><a href="https://cloud.tencent.com/redirect.php?redirect=1009&amp;cps_key=c809e5f9177c6354f546e3e79ffba96f&amp;from=console" title="免费SSL证书" target="_blank">免费SSL证书</a><ul></ul><a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=mqspr2q3" title="阿里云红包" target="_blank">阿里云红包</a><ul></ul><a href="https://cloud.tencent.com/redirect.php?redirect=1025&amp;cps_key=c809e5f9177c6354f546e3e79ffba96f&amp;from=console" title="腾讯云专属福利" target="_blank">腾讯云专属福利</a></div><div class="widget"><div class="widget-title"><script>var cpro_id = "u3438277";</script><script src="//cpro.baidustatic.com/cpro/ui/c.js"></script><script>var cpro_id = "u3438277";</script><script src="//cpro.baidustatic.com/cpro/ui/c.js"></script><script>var cpro_id = "u3438277";</script><script src="//cpro.baidustatic.com/cpro/ui/c.js"></script></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2021 <a href="/." rel="nofollow">代码星冰乐.</a> Powered by<a rel="nofollow" target="_blank" style="font-weight: bold" href="https://www.hchstudio.cn"> ChanghuiN.</a> 版权所有 晋ICP备15001365号<br><span>特别感谢：</span><a rel="nofollow" target="_blank" style="font-weight: bold" href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=c809e5f9177c6354f546e3e79ffba96f&amp;from=console."> 云服务器服务商</a> 、<a rel="nofollow" target="_blank" style="font-weight: bold" href="https://portal.qiniu.com/signup?code=3lor2p0wm2frm."> CDN 服务商</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.css"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?57858db5693024385f944247dd150c32";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https'){
  bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
} else{
  bp.src = 'https://push.zhanzhang.baidu.com/push.js';
}
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script></div></body></html>